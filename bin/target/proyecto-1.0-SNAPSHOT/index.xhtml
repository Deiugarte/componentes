<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:fb="http://www.facebook.com/2008/fbml">

    <f:view contentType="text/html">
        <h:head>
            <f:facet name="second">
                <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
                <title>index</title>
            </f:facet>
        </h:head>

        <h:body>
               <script>
                function statusChangeCallback(response) {
                    console.log('statusChangeCallback');
                    alert('HHDHDHD');
                    console.log(response);                  
                    if (response.status === 'connected') {  
                        testAPI();
                        alert("nfnd");
                    } else 
                        alert("ssss");
                        document.getElementById('status').innerHTML = 'Please log ' +
                            'into this app.';
                    }
                }
                function checkLoginState() {
                    FB.getLoginStatus(function (response){statusChangeCallback(response);});
                }

                window.fbAsyncInit = function () {
                    FB.init({
                        appId: '1943608085935991',
                        cookie: true, // enable cookies to allow the server to access 
                        // the session
                        xfbml: true, // parse social plugins on this page
                        version: 'v3.2' // use graph api version 2.8
                    });
                    
                    FB.getLoginStatus(function (response) {
                        statusChangeCallback(response);
                    });
                };
                (function (d, s, id) {
                    var js, fjs = d.getElementsByTagName(s)[0];
                    if (d.getElementById(id))
                        return;
                    js = d.createElement(s);
                    js.id = id;
                    js.src = "https://connect.facebook.net/en_US/sdk.js";
                    fjs.parentNode.insertBefore(js, fjs);
                }(document, 'script', 'facebook-jssdk'));
                
                function logout() {
                 
                    FB.api('/me', function (response) {
                    alert('Successful login for: ' + response.name);
                    document.getElementById('status').innerHTML =
                        'Thanks for logging in, ' + response.name + '!';
                    window.location.href = 'www.google.com';                    
                    });
                }
            </script>
            <fb:login-button onlogin="checkLoginState();" autologoutlink="true"></fb:login-button>
            <div id="status"> </div>

          

            
        </h:body>
    </f:view>
</html>

