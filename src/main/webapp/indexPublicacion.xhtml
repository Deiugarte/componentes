<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:fb="http://www.facebook.com/2008/fbml">
     <h:head>
        <title>Red Social</title>
    </h:head>
    <h:body>
        <script>
            window.fbAsyncInit = function () {
                FB.init({
                    appId: '2018591588229092',
                    autoLogAppEvents: true,
                    xfbml: true,
                    version: 'v3.2'
                });
            };

            (function (d, s, id) {
                var js, fjs = d.getElementsByTagName(s)[0];
                if (d.getElementById(id)) {
                    return;
                }
                js = d.createElement(s);
                js.id = id;
                js.src = "https://connect.facebook.net/en_US/sdk.js";
                fjs.parentNode.insertBefore(js, fjs);
            }(document, 'script', 'facebook-jssdk'));
        </script>
        <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = 'https://connect.facebook.net/es_ES/sdk.js#xfbml=1;version=v3.2;appId=2018591588229092;autoLogAppEvents=1';
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
        <h:form>  
            <p:commandButton action="Search?faces-redirect=true" icon="ui-icon-search" value="Search" />  
        </h:form>  

        <p:spacer> </p:spacer>  
        <h:form id="form1">  
            <p:dataTable id="dataTable" var="publicacion" paginator="true" rows="5" value="#{publicacionBean.publicacions}"> 
                <p:column headerText="RecordNo">  
                    <h:outputText value="#{publicacion.idPublicacion}" />  
                </p:column>  
                <p:column headerText="Título">  
                    <h:outputText value="#{publicacion.titulo}" />  
                </p:column>  
                <p:column headerText="Name">  
                    <h:outputText value="#{publicacion.contenido}" />
                </p:column>
                <p:column headerText="Compartir">
                    <div class="fb-share-button" data-href="http://localhost:8084/ProyectoComponentes/" data-layout="button" data-size="small" data-mobile-iframe="true"><a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A8084%2FProyectoComponentes%2F&amp;src=sdkpreparse" class="fb-xfbml-parse-ignore">Compartir</a></div>
                </p:column>
                <p:commandButton icon="ui-icon-plusthick" update=":form1:dataTable" type="summit" value="delete" action="#{publicacionBean.deletePublicacion(publicacion.idPublicacion)}" />
            </p:dataTable>  
        </h:form>  
        <br/>
        <p:fieldset legend="Nueva Publicación" toggleable="true" toggleSpeed="500" collapsed="true" >
            <h:form >  
                <p>Título: </p> 
                <p:inputText value="#{publicacionBean.newpublicacion.titulo}" /> 
                <p>Contenido:</p>
                <p:inputTextarea value="#{publicacionBean.newpublicacion.contenido}" rows="5" cols="30" counter="display" maxlength="500" counterTemplate="{0} characters remaining." autoResize="false" />
                <br/>
                <h:outputText id="display" />
                <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">    
                </h:panelGrid>  

                <p:commandButton icon="ui-icon-plusthick" update=":form1:dataTable" type="submit" value="Send" action="#{publicacionBean.addPublicacion()}" />
                <div class="fb-share-button" data-href="http://localhost:8084/proyecto/faces/indexPublicacion.xhtml" data-layout="button_count" data-size="large" data-mobile-iframe="true"><a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A8084%2Fproyecto%2Ffaces%2FindexPublicacion.xhtml&amp;src=sdkpreparse" class="fb-xfbml-parse-ignore">Compartir</a></div>
            </h:form>  
        </p:fieldset>
    </h:body>
</html>

